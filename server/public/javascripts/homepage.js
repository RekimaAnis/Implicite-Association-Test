(()=>{"use strict";var e={0:(e,t,n)=>{n.d(t,{E3:()=>d,R2:()=>r,Xm:()=>s,_J:()=>i,e0:()=>o});const r=()=>{const e=document.getElementById("content"),t=document.createElement("p");t.innerHTML=a(),e.appendChild(t)},a=()=>"\n            Mettez vos doigts sur les touches <b>E</b> et <b>I</b> de votre clavier.<br>\n            Des mots représentant les catégories indiquées au sommet vont apparaître à la suite au milieu de l'écran.<br>\n            Quand le mot appartient à la partie de gauche, appuyez sur la touche <b>E</b>, et inversement.<br>\n            Chaque objet appartient à <b>une seule</b> catégorie.<br> \n            Si vous faîtes une erreur, un ❌ apparaîtra et il vous faudra corriger votre erreur en pressant l'autre touche.<br>\n            <br>\n            La rapidité de vos réponses à cette tâche de classification est importante.<br>\n            <b>Allez aussi vite que possible</b> tout en faisant le moins d'erreurs possible.<br>\n            Si vous allez trop lentement ou faitres trop d'erreurs, cela produira un score inutilisable.<br>\n            <br>\n            <b>Cliquez sur un type de quizz pour commencer.</b>\n            ",s=e=>{document.getElementById("content").innerHTML=e},o=()=>{s("")},i=e=>{document.getElementById("answers-dict-display").innerHTML=JSON.stringify(e,null,2)},d=(e,t)=>{const n=document.getElementById("left-screen"),r=document.getElementById("right-screen");n.innerHTML="",r.innerHTML="",e.forEach((e=>{const t=document.createElement("p");t.textContent=e,n.appendChild(t)})),t.forEach((e=>{const t=document.createElement("p");t.textContent=e,r.appendChild(t)}))}},120:(e,t,n)=>{n.d(t,{G:()=>r});const r=e=>{const t=(e=>Object.values(e).filter((e=>e&&null!==e.deltaTime)).map((e=>e.deltaTime)))(e);let n=0;return t.forEach((e=>{n+=e})),n/t.length}},775:(e,t,n)=>{n.d(t,{Bh:()=>i,Sv:()=>r,bW:()=>s,kf:()=>o,uk:()=>d});const r=e=>{timer&&(clearInterval(timer),timer=null),timer=setInterval((()=>a(e)),10)},a=e=>{e[0]+=10,1e3===e[0]&&(e[0]=0,e[1]++,60===e[1]&&(e[1]=0,e[2]++));const t=e[2]<10?"0"+e[2]:e[2],n=e[1]<10?"0"+e[1]:e[1],r=e[0]<100?"0"+Math.floor(e[0]/10):Math.floor(e[0]/10);document.getElementById("timer").innerHTML=`${t} : ${n} : ${r}`},s=e=>{if(!(e>3))return{0:[["Science"],["Lettres"]],1:[["Féminin"],["Masculin"]],2:[["Féminin","Lettres"],["Masculin","Science"]],3:[["Féminin","Science"],["Masculin","Lettres"]]}[e];console.error("there's no dataset for this index")},o=async e=>{const t=await(async()=>{try{const e=await fetch("/word",{method:"GET"});return await e.json()}catch(e){console.error("error while fetching words")}})(),n=e.flat();return(e=>{for(let t=e.length-1;t>0;t--){const n=Math.floor(Math.random()*(t+1));[e[t],e[n]]=[e[n],e[t]]}return e})(t.filter((e=>n.includes(e.categorie))))},i=()=>({data:{index:0,lastQuestionTime:-400,averageTime:0},answers:{}}),d=e=>new Promise((t=>setTimeout(t,e)))}},t={};function n(r){var a=t[r];if(void 0!==a)return a.exports;var s=t[r]={exports:{}};return e[r](s,s.exports,n),s.exports}n.d=(e,t)=>{for(var r in t)n.o(t,r)&&!n.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t);var r=n(120),a=n(0),s=n(775);let o=0,i={firstCluster:null,secondCluster:null,thirdCluster:null,fourthCluster:null,fifthCluster:null,sixthCluster:null};const d=["firstCluster","secondCluster","thirdCluster","fourthCluster","fifthCluster","sixthCluster"];let l=null;const c=(e,t,n)=>{try{document.getElementById("timer").removeAttribute("hidden"),(0,a.e0)(),document.getElementById("random-button").style.visibility="hidden",document.getElementById("linear-button").style.visibility="hidden",(0,a.Xm)(e[0].mot),l&&document.removeEventListener("keydown",l),l=function(r){"KeyE"!==r.code&&"e"!==r.key&&"KeyI"!==r.code&&"i"!==r.key||(async(e,t,n,r)=>{const l=e[r.data.index];let[c,m,h]=n;const f=60*h*1e3+1e3*m+c,p=Array.from(document.getElementById("left-screen").children).map((e=>e.textContent.trim())),b=Array.from(document.getElementById("right-screen").children).map((e=>e.textContent.trim()));if(!p||!b)return void console.error("categories aren't defined");const g="e"===t?p:b,y=p.includes(l.categorie)?p:b;if(r.answers[l.mot]||(r.answers[l.mot]={questionIndex:r.data.index,numberOfTries:0,pressTime:f,deltaTime:null,leftOrRight:y===p?"left":"right",truncated:!1}),r.answers[l.mot].numberOfTries<2&&r.answers[l.mot].numberOfTries++,y===g){let t=f-r.data.lastQuestionTime;(t<300||t>3e3)&&(t=Math.min(Math.max(t,300),3e3),r.answers[l.mot].truncated=!0),r.answers[l.mot].deltaTime=t,(0,a.Xm)(""),await(0,s.uk)(400),[c,m,h]=n;const o=60*h*1e3+1e3*m+c;r.data.lastQuestionTime=o,r.data.index++,r.data.index<e.length&&(document.getElementById("cross").hidden=!0,(0,a.Xm)(e[r.data.index].mot))}else document.getElementById("cross").hidden=!1;r.data.index===e.length-1&&((0,a.Xm)("Prochaine série de questions dans 2 secondes"),i[d[o]]=r,setTimeout((()=>{o++,u()}),2e3)),(0,a._J)(r)})(e,r.key,t,n)},document.addEventListener("keydown",l)}catch(e){console.error("error in playWords : ",e)}},u=async()=>{let e,t,n,d=(0,s.Bh)(),l=[0,0,0];switch((0,s.Sv)(l),o){case 0:e=(0,s.bW)(0),(0,a.E3)(e[0],e[1]),t=await(0,s.kf)(e),c(t,l,d),d.data.averageTime=(0,r.G)(d);break;case 1:e=(0,s.bW)(1),(0,a.E3)(e[0],e[1]),t=await(0,s.kf)(e),c(t,l,d),d.data.averageTime=(0,r.G)(d);break;case 2:case 3:e=(0,s.bW)(2),(0,a.E3)(e[0],e[1]),t=await(0,s.kf)(e),c(t,l,d),d.data.averageTime=(0,r.G)(d),console.log(i);break;case 4:e=(0,s.bW)(0).reverse(),(0,a.E3)(e[0],e[1]),t=await(0,s.kf)(e),c(t,l,d),n=getTimeListForAverage(d),d.data.averageTime=(0,r.G)(n);break;case 5:case 6:e=(0,s.bW)(3),(0,a.E3)(e[0],e[1]),t=await(0,s.kf)(e),c(t,l,d),n=getTimeListForAverage(d),d.data.averageTime=(0,r.G)(n);break;case 7:(0,a.Xm)("FIN DU TEST, MERCI");default:return void console.error("default switch detected, should not happen")}};document.addEventListener("DOMContentLoaded",(()=>{console.log("setup"),(0,a.R2)(),document.addEventListener("keydown",(function(e){"Space"!==e.code&&" "!==e.key||u()}))}))})();